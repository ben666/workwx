<!DOCTYPE html>
<html lang="en">
<head>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta charset="UTF-8">
<title>趣味答题</title>
<link rel="stylesheet" href="/home/sass/stylesheets/screen.css">
<link rel="stylesheet" href="/home/sass/stylesheets/animate.min.css">
<style>
    html{
        width:100%;
        height:100%;
        overflow: hidden;
    }
    body{
        background: url(/home/images/answer/banner.png) center center no-repeat;
        background-size: 100% 100%;
        width: 100%;
        height: 100%;
        position: absolute;
    }
    .question-bg{
       text-align: center;
       height:70vh;
       margin-top:15vh;
    }
    .answerdetail{
        display: none;
    }
    .answerdetail-bg{
        text-align: center;
        height: 62vh;
        margin-top: 15vh;
        overflow-y: scroll;
        width: 100vw;
    }
    .question-bg img{
        width:60vw;
        height:70vh;
        position: absolute;
        z-index: -1;
        left:20vw;
        top:10vh;

    }
    .answerdetail-bg img{
        top:-5vh;
    }
    .question-order{
        /*position: absolute;*/
        /*top:5vh;*/
        /*left:50vw;*/
        position: relative;
        margin: 50px auto;
        top: 20px;
        width:15vw;
        /*margin-left: -10vw;*/
        font-size: 30px;
        color: #fff;
        border-radius: 30px;
        height:5vh;
        line-height:5vh;
        background-image:-webkit-linear-gradient(to top, #97461a,#fbd8c5 10%,#97461a);
        background-image:linear-gradient(to top,#97461a, #fbd8c5,#97461a);
    }
    .question-content{
        display: inline-block;
        width: 50vw;
        text-align: center;
        margin: 0 auto;
        display: none;
        position: absolute;
        left:25vw;
    }
    .detail-content{
        display: inline-block;
        width: 50vw;
        text-align: center;
        margin: 0 auto;
        position: absolute;
        left:25vw;
        display: block;
        position: static;
        margin-top: 50px;
        margin-bottom: 50px;
    }
    .detail-content:first-child{
        margin-top: 0;
    }
    .correctly{
        text-align: left;
        height:5vh;
        line-height:5vh;
        font-size: 24px;
        margin-top: 10px;
    }
    .correctly span{
        color: #f00;
    }
    .question-content p,.detail-content p{
        font-size:28px;
        line-height:1.5;
        text-align: left;
        margin: 0 auto;
        word-break: break-all;
    }
    .question-answer{
        font-size:24px;
        margin: 0 auto;
        text-align: left;
        word-break: break-all;
        display: flex;
        border-radius: 10px;
        background: #f2d7b0;
        margin-top: 20px;
    }
    .question-answer span:nth-child(1){
        padding: 0 10px;
        display: flex;
        background: #a56330;
        border-top-left-radius: 10px;
        border-bottom-left-radius: 10px;
        align-items: center;
        color: #fff;

    }
    .question-answer span:nth-child(2){
        display: flex;
        flex:2;
        padding:10px;
        cursor: pointer;
        -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    .answer-radio{
        display: flex;
        align-items: center;
    }
    .answer-radio label{
        line-height:20px;
        cursor: pointer;
        -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    input[type="radio"] + label::before {
        content: "\a0"; /*不换行空格*/
        display: inline-block;
        vertical-align: middle;
        font-size: 18px;
        width: 20px;
        height: 20px;
        margin-right: .4em;
        border-radius: 50%;
        border: 1px solid #0da3ce;
    }
    input[type="radio"].checked + label::before {
        background-color: #0da3ce;
        background-clip: content-box;
        height: 10px;
        width: 10px;
        padding: 5px;
    }
    input[type="radio"] {
        position: absolute;
        clip: rect(0, 0, 0, 0);
    }
    img.next{
        width:6vw;
        position: absolute;
        right:13vw;
        top:40vh;
    }
    img.previous{
        width:6vw;
        position: absolute;
        left:13vw;
        top:40vh;
        display: none;
    }
    .playmusic{
        width:8vw;
        position: absolute;
        left: 5vw;
        bottom:20vh;
        height:8vw;
        -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    .rotate{
        -webkit-transform: rotate(360deg);
        animation: rotation 3s linear infinite;
        -moz-animation: rotation 3s linear infinite;
        -webkit-animation: rotation 3s linear infinite;
        -o-animation: rotation 3s linear infinite;
    }
    @-webkit-keyframes rotation{
        from {-webkit-transform: rotate(0deg);}
        to {-webkit-transform: rotate(360deg);}
    }
    .music{
        background:url("/home/images/award/music.png");
        background-size: 100% 100%;
    }
    .mute{
        background:url("/home/images/award/mute.png");
        background-size: 100% 100%;
    }
    .submit,.goback,.detail{
        position: relative;
        margin:0 auto;
        width:15vw;
        height:10vh;
        background: url("/home/images/award/start.gif");
        background-size: 100% 100%;
        display: none;
        -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    .submit span,.goback span,.detail span{
        position: absolute;
        color: #fff;
        font-size: 24px;
        width:10vw;
        text-align: center;
        left:2.5vw;
        height:10vh;
        line-height:10vh;
    }
    .goback,.detail{
        display: block;
        top:8vh;
    }
    .detail{
        top:5vh;
    }
    .correct,.error{
        display: none;
    }
    .correct-bg,.error-bg{
        text-align: center;
        height:50vh;
        margin-top:15vh;
        position: relative;
    }
    .correct-bg .correct-bg-img,.error-bg .error-bg-img{
        width:40vw;
        height:50vh;
        position: absolute;
        z-index: -1;
        left:30vw;
    }
    .correct-bg-surprise,.error-bg-sad{
        position: absolute;
        left:50vw;
        width: 10vw;
        margin-left: -5vw;
        top:10vh;
    }
    .correct-bg p,.error-bg p{
        font-size:36px;
        color: #e3093a;
        position: absolute;
        text-align: center;
        width:40vw;
        left:30vw;
        bottom:10vh;
    }
    .error-bg p{
        color: #e77401;
    }
    .correct-gif{
        position: absolute;
        left: 28vw;
        top:-10vh;
        /*right: 0;*/
        width: 40vw;
    }
    #container{
        position: absolute;
        width:60vw;
        left:30vw;
    }

    #leafContainer > div
    {
        position: absolute;
        /*width: 100px;*/
        /*height: 100px;*/
        -webkit-animation-iteration-count: infinite, infinite;
        -webkit-animation-direction: normal, normal;
        -webkit-animation-timing-function: linear, ease-in;
    }
    #leafContainer > div > img {
        position: absolute;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-direction: alternate;
        -webkit-animation-timing-function: ease-in-out;
        -webkit-transform-origin: 50% -100%;
    }
    @-webkit-keyframes fade
    {
        0%   { opacity: 1; }
        80%  { opacity: 0; }
        100% { opacity: 0; }
    }
    @-webkit-keyframes drop
    {
        0%   { -webkit-transform: translate(0px, -50px); }
        100% { -webkit-transform: translate(0px, 650px); }
    }
    @-webkit-keyframes clockwiseSpin
    {
        0%   { -webkit-transform: rotate(-50deg); }
        100% { -webkit-transform: rotate(50deg); }
    }
    @-webkit-keyframes counterclockwiseSpinAndFlip
    {
        0%   { -webkit-transform: scale(-1, 1) rotate(50deg); }
        100% { -webkit-transform: scale(-1, 1) rotate(-50deg); }
    }
</style>
</head>
<body>
<div class="question">
<div class="question-bg">
    <img src="/home/images/award/question_bg.png">
    <div class="question-order"><span>1</span> / 6</div>
    <div class="content">
    {volist name="question" id="vo" key="n"}
    <div class="question-content animated" data-tab="{$vo.value}">
    <p>{$vo.title}</p>
        {volist name="vo->Option" id="value" key="k"}
        <div class="question-answer">
        <span>{if condition="($k eq 1) AND ($value neq ' ')"}A{elseif condition="($k eq 2) AND ($value neq ' ')"}B{elseif condition="($k eq 3 )AND ($value neq ' ')"}C{elseif condition="($k eq 4 )AND ($value neq ' ')"/}D{/if}.</span>
        <span>{$value|substr=###,'2'}</span>
        <div class="answer-radio">
            <input type="radio" name="answer" />
            <label></label>
        </div>
    </div>
   {/volist}
    </div>
{/volist}
        </div>
    </div>
<img src="/home/images/award/next.png" class="next">
<img src="/home/images/award/previous.png" class="previous">
<div class="submit"><span>确认提交</span></div>
</div>

<div class="correct animated">
    <div class="correct-bg">
    <img src="/home/images/award/question_bg.png" class="correct-bg-img">
    <img src="/home/images/award/surprise.png" class="correct-bg-surprise">
    <p>恭喜您，答对6题！</p>
    </div>
    <img src="/home/images/award/correct.gif" class="correct-gif">
    <div class="goback"><span>返回大厅</span></div>
</div>


<div class="error animated">
    <div id="container">
        <div id="leafContainer"></div>
    </div>
    <div class="error-bg">
        <img src="/home/images/award/question_bg.png" class="error-bg-img">
        <img src="/home/images/award/sad.png" class="error-bg-sad">
        <p>很遗憾，答对<span></span>题！</p>
    </div>
    <div class="detail"><span>查看详情</span></div>
    <div class="goback"><span>返回大厅</span></div>
</div>


<div class="answerdetail animated">
    <div class="question-bg answerdetail-bg">
        <img src="/home/images/award/question_bg.png">
        <div class="content">
            {volist name="question" id="vo" key="n"}
            <div class="detail-content">
                <p>{$vo.title}</p>
                {volist name="vo->Option" id="value" key="k"}
                <div class="question-answer">
                    <span>{if condition="($k eq 1) AND ($value neq ' ')"}A{elseif condition="($k eq 2) AND ($value neq ' ')"}B{elseif condition="($k eq 3 )AND ($value neq ' ')"}C{elseif condition="($k eq 4 )AND ($value neq ' ')"/}D{/if}.</span>
                    <span>{$value|substr=###,'2'}</span>
                </div>
                {/volist}
                {if condition="($vo['value'] == 1)"}
                <div class="correctly">正确答案：<span>A</span></div>
                {else /}
                {if condition="($vo['value'] == 2)"}
                <div class="correctly">正确答案：<span>B</span></div>
                {else /}
                {if condition="($vo['value'] == 3)"}
                <div class="correctly">正确答案：<span>C</span></div>
                {else /}
                <div class="correctly">正确答案：<span>D</span></div>
                {/if}
                {/if}
                {/if}
            </div>
            {/volist}
        </div>
    </div>
    <div class="goback"><span>返回大厅</span></div>
</div>

<div class="playmusic music rotate">
    <audio src="/home/sass/fonts/award_bg.mp3" autoplay="true" loop="loop" id="audio"></audio>
    <div path="/home/sass/fonts/award_bg.mp3" id="path"></div>
    <div path="/home/sass/fonts/fail.wav" id="path2"></div>
    <div path="/home/sass/fonts/victory.mp3" id="path3"></div>
</div>
</body>
<script src="/static/js/jquery-2.2.1.min.js"></script>
<script src="/home/js/leaves.js"></script>
<script>
    $(function(){
        audio.play();
        $(".question-content").eq(0).show();
    });
 $(".question-answer span:nth-child(2)").on("click",function(){
     var order = parseInt($(".question-order span").text());
     $(".question-content").eq(order-1).addClass("fadeOutRight").
     removeClass("fadeInLeft").removeClass("fadeInRight").removeClass("fadeOutLeft");
     $(".previous").show();
     $(".question-content").eq(order).addClass("fadeInLeft").
     removeClass("fadeOutRight").removeClass("fadeInRight").removeClass("fadeOutLeft").show();
     $(".question-order span").text(order+1);
     if( $(".question-order span").text()==6){
//         $(".question-content").eq(order-1).removeClass("fadeOutRight");
//         $(".question-content").eq(order).removeClass("fadeInLeft");
         $(".submit").show();
         $(".next").hide();
     }
     if( $(".question-order span").text()==7){
         $(".question-order span").text(6)
         $(".question-content").eq(order-1).removeClass("fadeOutRight");
         $(".question-content").eq(order).removeClass("fadeInLeft");
     }
     var check = $(this).next().children("input").hasClass("checked");
     if(!check){
         $(this).parent().parent().find("input").removeClass("checked");
         $(this).next().children("input").addClass("checked");
     }
 });

 $(".answer-radio label").on("click",function(){
     var order = parseInt($(".question-order span").text());
     $(".question-content").eq(order-1).addClass("fadeOutRight").
     removeClass("fadeInLeft").removeClass("fadeInRight").removeClass("fadeOutLeft");
     $(".previous").show();
     $(".question-content").eq(order).addClass("fadeInLeft").
     removeClass("fadeOutRight").removeClass("fadeInRight").removeClass("fadeOutLeft").show();
     $(".question-order span").text(order+1);
     if( $(".question-order span").text()==6){
         $(".submit").show();
         $(".next").hide();
     }
     if( $(".question-order span").text()==7){
         $(".question-order span").text(6)
         $(".question-content").eq(order-1).removeClass("fadeOutRight");
         $(".question-content").eq(order).removeClass("fadeInLeft");
     }
     var check = $(this).prev().hasClass("checked");
     if(!check){
         $(this).parent().parent().parent().find("input").removeClass("checked");
         $(this).prev().addClass("checked");
     }
 });

 $(".playmusic").on("click",function(){
    if($(this).hasClass("music")){
        $(this).removeClass("music").addClass("mute").removeClass("rotate");
        audio.pause();
    }else{
        $(this).removeClass("mute").addClass("music").addClass("rotate");
        audio.play();
    }
 });

    $(".next").on("click",function(){
        var order = parseInt($(".question-order span").text());
        $(".question-content").eq(order-1).addClass("fadeOutRight").
        removeClass("fadeInLeft").removeClass("fadeInRight").removeClass("fadeOutLeft");
        $(".previous").show();
        $(".question-content").eq(order).addClass("fadeInLeft").
        removeClass("fadeOutRight").removeClass("fadeInRight").removeClass("fadeOutLeft").show();
        $(".question-order span").text(order+1);
        if( $(".question-order span").text()==6){
            $(".submit").show();
            $(".next").hide();
        }
    });

    $(".previous").on("click",function(){
        var order = parseInt($(".question-order span").text());
        $(".question-content").eq(order-1).addClass("fadeOutLeft").
        removeClass("fadeInRight").removeClass("fadeOutRight").removeClass("fadeInLeft");
        $(".next").show();
        $(".question-content").eq(order-2).addClass("fadeInRight").
        removeClass("fadeOutLeft").removeClass("fadeOutRight").removeClass("fadeInLeft");
        $(".question-order span").text(order-1);
        if( $(".question-order span").text()==1){
            $(".previous").hide();
        }
    });

    $(".submit").on("click",function(){
        var answer = [];
        var standard = [];
        var arr = [];
        $(".question-content").each(function(){
            standard.push($(this).data("tab"));
        });
        for(i=0;i<$(".question-content").length;i++){
        if($(".question-content").eq(i).find("input").hasClass("checked")){
            $(".question-content").eq(i).find(".answer-radio input").each(function(index){
                if($(this).hasClass("checked")){
                    answer[i] = (parseInt(index)+1);
                }
            })
          }else{
            answer[i] = null;
        }
        }
       if(JSON.stringify(answer) == JSON.stringify(standard)){
           $(".question").addClass("bounceOut").hide();
           $(".correct").addClass("bounceIn").show();
        audio.pause();
        var luyinpath = $("#path3").attr('path');
        $("#audio").attr('src', luyinpath);
        audio.play();
        setTimeout(function(){
            audio.pause();
            var luyinpath = $("#path").attr('path');
            $("#audio").attr('src', luyinpath);
            audio.play();
        },4000)
       }else{
           console.log(answer)
           console.log(standard)
          for(i=0;i<answer.length;i++){
                  if(answer[i]==standard[i]){
                      arr.push(answer[i]);
                  }
          }
           console.log(arr.length)
           $(".error-bg p span").text(arr.length);
           $(".question").addClass("bounceOut").hide();
           setTimeout(function(){
               $(".error").addClass("bounceIn").show();
               audio.pause();
               var luyinpath = $("#path2").attr('path');
               $("#audio").attr('src', luyinpath);
               audio.play();
               setTimeout(function(){
                   audio.pause();
                   var luyinpath = $("#path").attr('path');
                   $("#audio").attr('src', luyinpath);
                   audio.play();
               },3500)
           },300)
       }

    });

    $(".goback").on("click",function(){
        window.location.href="/home/award/answer.html"
    })

    $(".detail").on("click",function(){
        $(".question").addClass("bounceOut").hide();
        $(".error").addClass("bounceOut").hide();
        $(".answerdetail").addClass("bounceIn").show();
    })


</script>
</html>